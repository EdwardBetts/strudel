var d=Object.defineProperty,m=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var u=(r,e,t)=>e in r?d(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,v=(r,e)=>{for(var t in e||(e={}))p.call(e,t)&&u(r,t,e[t]);if(f)for(var t of f(e))T.call(e,t)&&u(r,t,e[t]);return r},w=(r,e)=>m(r,x(e));import{P as W}from"./index.f0cb3b1d.js";var n,b=!1;async function $(r=115200){if(!b){if(b=!0,n)return n;if("serial"in navigator){const e=await navigator.serial.requestPort();await e.open({baudRate:r});const t=new TextEncoderStream;t.readable.pipeTo(e.writable);const s=t.writable.getWriter();n=function(o){s.write(o)}}else throw"Webserial is not available in this browser."}}const j=.1;W.prototype.serial=async function(...r){return this._withHap(e=>{n||$(...r);const t=(s,o,g)=>{var i="";if(typeof o.value=="object")if("action"in o.value){i+=o.value.action+"(";var c=!0;for(const[a,l]of Object.entries(o.value))a!=="action"&&(c?c=!1:i+=",",i+=`${a}:${l}`);i+=")"}else for(const[a,l]of Object.entries(o.value))i+=`${a}:${l};`;else i=o.value;console.log("sending: "+i);const y=(s-g+j)*1e3;window.setTimeout(n,y,i)};return e.setContext(w(v({},e.context),{onTrigger:t}))})};export{$ as getWriter};
