var tt=Object.defineProperty,nt=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var Re=(a,f,r)=>f in a?tt(a,f,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[f]=r,H=(a,f)=>{for(var r in f||(f={}))Pe.call(f,r)&&Re(a,r,f[r]);if(M)for(var r of M(f))Oe.call(f,r)&&Re(a,r,f[r]);return a},J=(a,f)=>nt(a,at(f));var qe=(a,f)=>{var r={};for(var $ in a)Pe.call(a,$)&&f.indexOf($)<0&&(r[$]=a[$]);if(a!=null&&M)for(var $ of M(a))f.indexOf($)<0&&Oe.call(a,$)&&(r[$]=a[$]);return r};import{F as it}from"./index.ae805d5c.js";function ft(a,f){function r(){this.constructor=a}r.prototype=f.prototype,a.prototype=new r}function D(a,f,r,$){var l=Error.call(this,a);return Object.setPrototypeOf&&Object.setPrototypeOf(l,D.prototype),l.expected=f,l.found=r,l.location=$,l.name="SyntaxError",l}ft(D,Error);function K(a,f,r){return r=r||" ",a.length>f?a:(f-=a.length,r+=r.repeat(f),a+r.slice(0,f))}D.prototype.format=function(a){var f="Error: "+this.message;if(this.location){var r=null,$;for($=0;$<a.length;$++)if(a[$].source===this.location.source){r=a[$].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,m=this.location.source+":"+l.line+":"+l.column;if(r){var A=this.location.end,w=K("",l.line.toString().length),E=r[l.line-1],d=l.line===A.line?A.column:E.length+1;f+=`
 --> `+m+`
`+w+` |
`+l.line+" | "+E+`
`+w+" | "+K("",l.column-1)+K("",d-l.column,"^")}else f+=`
 at `+m}return f};D.buildMessage=function(a,f){var r={literal:function(d){return'"'+l(d.text)+'"'},class:function(d){var _=d.parts.map(function(y){return Array.isArray(y)?m(y[0])+"-"+m(y[1]):m(y)});return"["+(d.inverted?"^":"")+_+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(d){return d.description}};function $(d){return d.charCodeAt(0).toString(16).toUpperCase()}function l(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+$(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+$(_)})}function m(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+$(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+$(_)})}function A(d){return r[d.type](d)}function w(d){var _=d.map(A),y,F;if(_.sort(),_.length>0){for(y=1,F=1;y<_.length;y++)_[y-1]!==_[y]&&(_[F]=_[y],F++);_.length=F}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function E(d){return d?'"'+l(d)+'"':"end of input"}return"Expected "+w(a)+" but "+E(f)+" found."};function Ie(a,f){f=f!==void 0?f:{};var r={},$=f.grammarSource,l={start:xe},m=xe,A=".",w="-",E="+",d="0",_=",",y='"',F="'",ze="#",Le="^",Me="_",W="[",Y="]",Ze="<",Be=">",Ge="@",Ue="!",Xe="(",He=")",Je="/",Ke="*",Qe="%",ee="struct",re="target",se="euclid",te="slow",ne="rotL",ae="rotR",ie="fast",fe="scale",oe="//",ce="cat",Ve="$",le="setcps",ue="setbpm",pe="hush",We=/^[1-9]/,Ye=/^[eE]/,er=/^[0-9]/,ge=/^[ \n\r\t]/,rr=/^[0-9a-zA-Z~]/,ve=/^[^\n]/,sr=ye("number"),$e=g(".",!1),tr=j([["1","9"]],!1,!1),nr=j(["e","E"],!1,!1),he=g("-",!1),ar=g("+",!1),ir=g("0",!1),fr=j([["0","9"]],!1,!1),or=ye("whitespace"),me=j([" ",`
`,"\r","	"],!1,!1),cr=g(",",!1),lr=g('"',!1),ur=g("'",!1),pr=j([["0","9"],["a","z"],["A","Z"],"~"],!1,!1),gr=g("#",!1),vr=g("^",!1),$r=g("_",!1),_e=g("[",!1),de=g("]",!1),hr=g("<",!1),mr=g(">",!1),_r=g("@",!1),dr=g("!",!1),wr=g("(",!1),Ar=g(")",!1),br=g("/",!1),yr=g("*",!1),Cr=g("%",!1),xr=g("struct",!1),Er=g("target",!1),Fr=g("euclid",!1),jr=g("slow",!1),Sr=g("rotL",!1),Rr=g("rotR",!1),Pr=g("fast",!1),Or=g("scale",!1),qr=g("//",!1),we=j([`
`],!0,!1),Dr=g("cat",!1),Ir=g("$",!1),Nr=g("setcps",!1),kr=g("setbpm",!1),Tr=g("hush",!1),zr=function(){return parseFloat($s())},Lr=function(e){return e.join("")},Mr=function(e){return e},Zr=function(e){return e.arguments_.alignment="t",e},Br=function(e){return{weight:e}},Gr=function(e){return{replicate:e}},Ur=function(e,t,n){return{operator:{type_:"bjorklund",arguments_:{pulse:e,step:t,rotation:n||0}}}},Xr=function(e){return{operator:{type_:"stretch",arguments_:{amount:e}}}},Hr=function(e){return{operator:{type_:"stretch",arguments_:{amount:"1/"+e}}}},Jr=function(e){return{operator:{type_:"fixed-step",arguments_:{amount:e}}}},Kr=function(e,t){return new st(e,t)},Qr=function(e){return new U(e,"h")},Ae=function(e,t){return t},Vr=function(e,t){return t.length==0&&e instanceof Object?e:(t.unshift(e),new U(t,"v"))},Wr=function(e){return e},Yr=function(e){return{name:"struct",args:{sequence:e}}},es=function(e){return{name:"target",args:{name:e}}},rs=function(e,t,n){return{name:"bjorklund",args:{pulse:parseInt(e),step:parseInt(t)}}},ss=function(e){return{name:"stretch",args:{amount:e}}},ts=function(e){return{name:"shift",args:{amount:"-"+e}}},ns=function(e){return{name:"shift",args:{amount:e}}},as=function(e){return{name:"stretch",args:{amount:"1/"+e}}},is=function(e){return{name:"scale",args:{scale:e.join("")}}},be=function(e,t){return t},fs=function(e,t){return t.unshift(e),new U(t,"t")},os=function(e){return e},cs=function(e,t){return new rt(e.name,e.args,t)},ls=function(e){return e},us=function(e){return e},ps=function(e){return new X("setcps",{value:e})},gs=function(e){return new X("setcps",{value:e/120/2})},vs=function(){return new X("hush")},s=0,p=0,N=[{line:1,column:1}],x=0,Z=[],o=0,k;if("startRule"in f){if(!(f.startRule in l))throw new Error(`Can't start parsing from rule "`+f.startRule+'".');m=l[f.startRule]}function $s(){return a.substring(p,s)}function hs(){return B(p,s)}function g(e,t){return{type:"literal",text:e,ignoreCase:t}}function j(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function ms(){return{type:"end"}}function ye(e){return{type:"other",description:e}}function Ce(e){var t=N[e],n;if(t)return t;for(n=e-1;!N[n];)n--;for(t=N[n],t={line:t.line,column:t.column};n<e;)a.charCodeAt(n)===10?(t.line++,t.column=1):t.column++,n++;return N[e]=t,t}function B(e,t){var n=Ce(e),i=Ce(t);return{source:$,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function c(e){s<x||(s>x&&(x=s,Z=[]),Z.push(e))}function _s(e,t,n){return new D(D.buildMessage(e,t),e,t,n)}function xe(){var e;return e=et(),e}function b(){var e,t;return o++,e=s,Ee(),t=T(),t!==r?(ys(),bs(),p=e,e=zr()):(s=e,e=r),o--,e===r&&o===0&&c(sr),e}function ds(){var e;return a.charCodeAt(s)===46?(e=A,s++):(e=r,o===0&&c($e)),e}function ws(){var e;return We.test(a.charAt(s))?(e=a.charAt(s),s++):(e=r,o===0&&c(tr)),e}function As(){var e;return Ye.test(a.charAt(s))?(e=a.charAt(s),s++):(e=r,o===0&&c(nr)),e}function bs(){var e,t,n,i,v;if(e=s,t=As(),t!==r){if(n=Ee(),n===r&&(n=Cs()),n===r&&(n=null),i=[],v=S(),v!==r)for(;v!==r;)i.push(v),v=S();else i=r;i!==r?(t=[t,n,i],e=t):(s=e,e=r)}else s=e,e=r;return e}function ys(){var e,t,n,i;if(e=s,t=ds(),t!==r){if(n=[],i=S(),i!==r)for(;i!==r;)n.push(i),i=S();else n=r;n!==r?(t=[t,n],e=t):(s=e,e=r)}else s=e,e=r;return e}function T(){var e,t,n,i;if(e=xs(),e===r)if(e=s,t=ws(),t!==r){for(n=[],i=S();i!==r;)n.push(i),i=S();t=[t,n],e=t}else s=e,e=r;return e}function Ee(){var e;return a.charCodeAt(s)===45?(e=w,s++):(e=r,o===0&&c(he)),e}function Cs(){var e;return a.charCodeAt(s)===43?(e=E,s++):(e=r,o===0&&c(ar)),e}function xs(){var e;return a.charCodeAt(s)===48?(e=d,s++):(e=r,o===0&&c(ir)),e}function S(){var e;return er.test(a.charAt(s))?(e=a.charAt(s),s++):(e=r,o===0&&c(fr)),e}function u(){var e,t;for(o++,e=[],ge.test(a.charAt(s))?(t=a.charAt(s),s++):(t=r,o===0&&c(me));t!==r;)e.push(t),ge.test(a.charAt(s))?(t=a.charAt(s),s++):(t=r,o===0&&c(me));return o--,t=r,o===0&&c(or),e}function R(){var e,t,n,i;return e=s,t=u(),a.charCodeAt(s)===44?(n=_,s++):(n=r,o===0&&c(cr)),n!==r?(i=u(),t=[t,n,i],e=t):(s=e,e=r),e}function P(){var e;return a.charCodeAt(s)===34?(e=y,s++):(e=r,o===0&&c(lr)),e===r&&(a.charCodeAt(s)===39?(e=F,s++):(e=r,o===0&&c(ur))),e}function z(){var e;return rr.test(a.charAt(s))?(e=a.charAt(s),s++):(e=r,o===0&&c(pr)),e===r&&(a.charCodeAt(s)===45?(e=w,s++):(e=r,o===0&&c(he)),e===r&&(a.charCodeAt(s)===35?(e=ze,s++):(e=r,o===0&&c(gr)),e===r&&(a.charCodeAt(s)===46?(e=A,s++):(e=r,o===0&&c($e)),e===r&&(a.charCodeAt(s)===94?(e=Le,s++):(e=r,o===0&&c(vr)),e===r&&(a.charCodeAt(s)===95?(e=Me,s++):(e=r,o===0&&c($r))))))),e}function Fe(){var e,t,n;if(e=s,u(),t=[],n=z(),n!==r)for(;n!==r;)t.push(n),n=z();else t=r;return t!==r?(n=u(),p=e,e=Lr(t)):(s=e,e=r),e}function Es(){var e,t,n,i;return e=s,u(),a.charCodeAt(s)===91?(t=W,s++):(t=r,o===0&&c(_e)),t!==r?(u(),n=Se(),n!==r?(u(),a.charCodeAt(s)===93?(i=Y,s++):(i=r,o===0&&c(de)),i!==r?(u(),p=e,e=Mr(n)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}function Fs(){var e,t,n,i;return e=s,u(),a.charCodeAt(s)===60?(t=Ze,s++):(t=r,o===0&&c(hr)),t!==r?(u(),n=L(),n!==r?(u(),a.charCodeAt(s)===62?(i=Be,s++):(i=r,o===0&&c(mr)),i!==r?(u(),p=e,e=Zr(n)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}function js(){var e;return e=Fe(),e===r&&(e=Es(),e===r&&(e=Fs())),e}function Ss(){var e;return e=Rs(),e===r&&(e=Os(),e===r&&(e=qs(),e===r&&(e=Ds(),e===r&&(e=Is(),e===r&&(e=Ps()))))),e}function Rs(){var e,t,n;return e=s,a.charCodeAt(s)===64?(t=Ge,s++):(t=r,o===0&&c(_r)),t!==r?(n=b(),n!==r?(p=e,e=Br(n)):(s=e,e=r)):(s=e,e=r),e}function Ps(){var e,t,n;return e=s,a.charCodeAt(s)===33?(t=Ue,s++):(t=r,o===0&&c(dr)),t!==r?(n=b(),n!==r?(p=e,e=Gr(n)):(s=e,e=r)):(s=e,e=r),e}function Os(){var e,t,n,i,v,h,C;return e=s,a.charCodeAt(s)===40?(t=Xe,s++):(t=r,o===0&&c(wr)),t!==r?(u(),n=b(),n!==r?(u(),i=R(),i!==r?(u(),v=b(),v!==r?(u(),R(),u(),h=b(),h===r&&(h=null),u(),a.charCodeAt(s)===41?(C=He,s++):(C=r,o===0&&c(Ar)),C!==r?(p=e,e=Ur(n,v,h)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}function qs(){var e,t,n;return e=s,a.charCodeAt(s)===47?(t=Je,s++):(t=r,o===0&&c(br)),t!==r?(n=b(),n!==r?(p=e,e=Xr(n)):(s=e,e=r)):(s=e,e=r),e}function Ds(){var e,t,n;return e=s,a.charCodeAt(s)===42?(t=Ke,s++):(t=r,o===0&&c(yr)),t!==r?(n=b(),n!==r?(p=e,e=Hr(n)):(s=e,e=r)):(s=e,e=r),e}function Is(){var e,t,n;return e=s,a.charCodeAt(s)===37?(t=Qe,s++):(t=r,o===0&&c(Cr)),t!==r?(n=b(),n!==r?(p=e,e=Jr(n)):(s=e,e=r)):(s=e,e=r),e}function je(){var e,t,n;return e=s,t=js(),t!==r?(n=Ss(),n===r&&(n=null),p=e,e=Kr(t,n)):(s=e,e=r),e}function L(){var e,t,n;if(e=s,t=[],n=je(),n!==r)for(;n!==r;)t.push(n),n=je();else t=r;return t!==r&&(p=e,t=Qr(t)),e=t,e}function Se(){var e,t,n,i,v,h;if(e=s,t=L(),t!==r){for(n=[],i=s,v=R(),v!==r?(h=L(),h!==r?(p=i,i=Ae(t,h)):(s=i,i=r)):(s=i,i=r);i!==r;)n.push(i),i=s,v=R(),v!==r?(h=L(),h!==r?(p=i,i=Ae(t,h)):(s=i,i=r)):(s=i,i=r);p=e,e=Vr(t,n)}else s=e,e=r;return e}function Ns(){var e,t,n,i;return e=s,u(),t=P(),t!==r?(n=Se(),n!==r?(i=P(),i!==r?(p=e,e=Wr(n)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}function ks(){var e;return e=Us(),e===r&&(e=Ms(),e===r&&(e=Gs(),e===r&&(e=zs(),e===r&&(e=Ls(),e===r&&(e=Ts(),e===r&&(e=Bs(),e===r&&(e=Zs()))))))),e}function Ts(){var e,t,n;return e=s,a.substr(s,6)===ee?(t=ee,s+=6):(t=r,o===0&&c(xr)),t!==r?(u(),n=O(),n!==r?(p=e,e=Yr(n)):(s=e,e=r)):(s=e,e=r),e}function zs(){var e,t,n,i,v;return e=s,a.substr(s,6)===re?(t=re,s+=6):(t=r,o===0&&c(Er)),t!==r?(u(),n=P(),n!==r?(i=Fe(),i!==r?(v=P(),v!==r?(p=e,e=es(i)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}function Ls(){var e,t,n,i;return e=s,a.substr(s,6)===se?(t=se,s+=6):(t=r,o===0&&c(Fr)),t!==r?(u(),n=T(),n!==r?(u(),i=T(),i!==r?(u(),T(),p=e,e=rs(n,i)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r),e}function Ms(){var e,t,n;return e=s,a.substr(s,4)===te?(t=te,s+=4):(t=r,o===0&&c(jr)),t!==r?(u(),n=b(),n!==r?(p=e,e=ss(n)):(s=e,e=r)):(s=e,e=r),e}function Zs(){var e,t,n;return e=s,a.substr(s,4)===ne?(t=ne,s+=4):(t=r,o===0&&c(Sr)),t!==r?(u(),n=b(),n!==r?(p=e,e=ts(n)):(s=e,e=r)):(s=e,e=r),e}function Bs(){var e,t,n;return e=s,a.substr(s,4)===ae?(t=ae,s+=4):(t=r,o===0&&c(Rr)),t!==r?(u(),n=b(),n!==r?(p=e,e=ns(n)):(s=e,e=r)):(s=e,e=r),e}function Gs(){var e,t,n;return e=s,a.substr(s,4)===ie?(t=ie,s+=4):(t=r,o===0&&c(Pr)),t!==r?(u(),n=b(),n!==r?(p=e,e=as(n)):(s=e,e=r)):(s=e,e=r),e}function Us(){var e,t,n,i,v;if(e=s,a.substr(s,5)===fe?(t=fe,s+=5):(t=r,o===0&&c(Or)),t!==r)if(u(),n=P(),n!==r){if(i=[],v=z(),v!==r)for(;v!==r;)i.push(v),v=z();else i=r;i!==r?(v=P(),v!==r?(p=e,e=is(i)):(s=e,e=r)):(s=e,e=r)}else s=e,e=r;else s=e,e=r;return e}function G(){var e,t,n,i;if(e=s,a.substr(s,2)===oe?(t=oe,s+=2):(t=r,o===0&&c(qr)),t!==r){for(n=[],ve.test(a.charAt(s))?(i=a.charAt(s),s++):(i=r,o===0&&c(we));i!==r;)n.push(i),ve.test(a.charAt(s))?(i=a.charAt(s),s++):(i=r,o===0&&c(we));t=[t,n],e=t}else s=e,e=r;return e}function Xs(){var e,t,n,i,v,h,C,q;if(e=s,a.substr(s,3)===ce?(t=ce,s+=3):(t=r,o===0&&c(Dr)),t!==r)if(u(),a.charCodeAt(s)===91?(n=W,s++):(n=r,o===0&&c(_e)),n!==r)if(u(),i=O(),i!==r){for(v=[],h=s,C=R(),C!==r?(q=O(),q!==r?(p=h,h=be(i,q)):(s=h,h=r)):(s=h,h=r);h!==r;)v.push(h),h=s,C=R(),C!==r?(q=O(),q!==r?(p=h,h=be(i,q)):(s=h,h=r)):(s=h,h=r);h=u(),a.charCodeAt(s)===93?(C=Y,s++):(C=r,o===0&&c(de)),C!==r?(p=e,e=fs(i,v)):(s=e,e=r)}else s=e,e=r;else s=e,e=r;else s=e,e=r;return e}function Hs(){var e;return e=Xs(),e===r&&(e=Ns()),e}function O(){var e,t,n,i,v;if(e=s,t=Hs(),t!==r){for(u(),n=[],i=G();i!==r;)n.push(i),i=G();p=e,e=os(t)}else s=e,e=r;return e===r&&(e=s,t=ks(),t!==r?(u(),a.charCodeAt(s)===36?(n=Ve,s++):(n=r,o===0&&c(Ir)),n!==r?(i=u(),v=O(),v!==r?(p=e,e=cs(t,v)):(s=e,e=r)):(s=e,e=r)):(s=e,e=r)),e}function Js(){var e,t;return e=s,t=O(),t!==r&&(p=e,t=ls(t)),e=t,e===r&&(e=G()),e}function Ks(){var e;return e=Js(),e}function Qs(){var e,t;return e=s,u(),t=Vs(),t===r&&(t=Ws(),t===r&&(t=Ys())),t!==r?(u(),p=e,e=us(t)):(s=e,e=r),e}function Vs(){var e,t,n;return e=s,a.substr(s,6)===le?(t=le,s+=6):(t=r,o===0&&c(Nr)),t!==r?(u(),n=b(),n!==r?(p=e,e=ps(n)):(s=e,e=r)):(s=e,e=r),e}function Ws(){var e,t,n;return e=s,a.substr(s,6)===ue?(t=ue,s+=6):(t=r,o===0&&c(kr)),t!==r?(u(),n=b(),n!==r?(p=e,e=gs(n)):(s=e,e=r)):(s=e,e=r),e}function Ys(){var e,t;return e=s,a.substr(s,4)===pe?(t=pe,s+=4):(t=r,o===0&&c(Tr)),t!==r&&(p=e,t=vs()),e=t,e}function et(){var e;return e=Ks(),e===r&&(e=Qs()),e}var U=function(e,t){this.type_="pattern",this.arguments_={alignment:t},this.source_=e},rt=function(e,t,n){this.type_=e,this.arguments_=t,this.source_=n},st=function(e,t){this.type_="element",this.source_=e,this.options_=t,this.location_=hs()},X=function(e,t){this.type_="command",this.name_=e,this.options_=t};if(k=m(),k!==r&&s===a.length)return k;throw k!==r&&s<a.length&&c(ms()),_s(Z,x<a.length?a.charAt(x):null,x<a.length?B(x,x+1):B(x,x))}const{pure:ot,Pattern:Q,Fraction:Ne,stack:ct,slowcat:lt,sequence:ke,timeCat:ut,silence:De,reify:Te}=it,pt=a=>(f,r)=>{const l=a.source_[r].options_,m=l==null?void 0:l.operator;if(m){switch(m.type_){case"stretch":const w=Ne(m.arguments_.amount).inverse();return Te(f).fast(w);case"bjorklund":return f.euclid(m.arguments_.pulse,m.arguments_.step,m.arguments_.rotation)}console.warn(`operator "${m.type_}" not implemented`)}if(l!=null&&l.weight)return f;const A=Object.keys(l||{}).filter(w=>w!=="operator");return A.length&&console.warn(`option${A.length>1?"s":""} ${A.map(w=>`"${w}"`).join(", ")} not implemented`),f};function gt(a){a.source_=a.source_.map(f=>{const l=f.options_||{},{replicate:r}=l,$=qe(l,["replicate"]);return r?J(H({},f),{options_:J(H({},$),{weight:r}),source_:{type_:"pattern",arguments_:{alignment:"h"},source_:[{type_:"element",source_:f.source_,location_:f.location_,options_:{operator:{type_:"stretch",arguments_:{amount:Ne(r).inverse().toString()}}}}]}}):f})}function I(a){switch(a.type_){case"pattern":gt(a);const f=a.source_.map(I).map(pt(a)),r=a.arguments_.alignment;if(r==="v")return ct(...f);const $=a.source_.some(l=>{var m;return!!((m=l.options_)!=null&&m.weight)});if(!$&&r==="t")return lt(...f);if($){const l=ut(...a.source_.map((m,A)=>{var w;return[((w=m.options_)==null?void 0:w.weight)||1,f[A]]}));if(r==="t"){const m=a.source_.reduce((A,w)=>{var E;return A+(((E=w.options_)==null?void 0:E.weight)||1)},0);return l._slow(m)}return l}return ke(...f);case"element":if(a.source_==="~")return De;if(typeof a.source_!="object"){if(!a.location_)return console.warn("no location for",a),a.source_;const{start:l,end:m}=a.location_,A=isNaN(Number(a.source_))?a.source_:Number(a.source_);return ot(A).withLocation([l.line,l.column,l.offset],[m.line,m.column,m.offset])}return I(a.source_);case"stretch":return I(a.source_).slow(a.arguments_.amount);default:return console.warn(`node type "${a.type_}" not implemented -> returning silence`),De}}const V=(...a)=>{const f=a.map(r=>{const $=Ie(`"${r}"`);return I($)});return ke(...f)},vt=a=>{const f=Ie(a);return I(f)};Q.prototype.define("mini",V,{composable:!0});Q.prototype.define("m",V,{composable:!0});Q.prototype.define("h",vt,{composable:!0});function mt(a){return typeof a=="string"?V(a):Te(a)}export{D as SyntaxError,vt as h,V as mini,mt as minify,Ie as parse,I as patternifyAST};
